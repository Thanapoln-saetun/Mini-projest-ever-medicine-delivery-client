{"ast":null,"code":"import _toConsumableArray from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// rafce\nimport React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import ProductCart from\"../card/ProductCard\";// antd\nimport{Slider,Checkbox}from\"antd\";// function\nimport{listProduct,searchFilters}from\"../functions/product\";import{listCategory}from\"../functions/category\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Shop=function Shop(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([0,0]),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),ok=_useState8[0],setOk=_useState8[1];// Category\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),categorySelect=_useState12[0],setCategorySelect=_useState12[1];var _useSelector=useSelector(function(state){return _objectSpread({},state);}),search=_useSelector.search;// console.log(search.text)\nvar text=search.text;// text\n// 1. Load All Data\nuseEffect(function(){//code\nloadData();listCategory().then(function(res){return setCategory(res.data);});},[]);var loadData=function loadData(){setLoading(true);// code\nlistProduct(12).then(function(res){setProduct(res.data);setLoading(false);}).catch(function(err){setLoading(false);console.log(err);});};// 2. load data Text\nuseEffect(function(){var delay=setTimeout(function(){fetchDataFilter({query:text});if(!text){loadData();}},300);return function(){return clearTimeout(delay);};},[text]);// Filter\nvar fetchDataFilter=function fetchDataFilter(arg){searchFilters(arg).then(function(res){setProduct(res.data);});};// 3. Load on Slider\nuseEffect(function(){fetchDataFilter({price:price});// [0,0]\n},[ok]);var handlePrice=function handlePrice(value){setPrice(value);setTimeout(function(){setOk(!ok);},300);};var handleCheck=function handleCheck(e){// ค่าปัจจุบันที่ Check\nvar inCheck=e.target.value;// ค่าเดิมของ Check\nvar inState=_toConsumableArray(categorySelect);var findCheck=inState.indexOf(inCheck);if(findCheck===-1){inState.push(inCheck);}else{inState.splice(findCheck,1);}setCategorySelect(inState);fetchDataFilter({category:inState});// [0,0]\nif(inState.length<1){loadData();}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 \",style:{backgroundColor:'#F1F0F0',height:'94vh',borderRadius:'10px'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-3 \",children:\" Filter / Search\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h6\",{children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E23\\u0E32\\u0E04\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(Slider,{value:price,onChange:handlePrice,range:true,max:5000}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h6\",{children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E15\\u0E32\\u0E21\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),category.map(function(item,index){return/*#__PURE__*/_jsx(Checkbox,{onChange:handleCheck,value:item._id,children:item.name});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[loading?/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:\"Loading...\"}):/*#__PURE__*/_jsx(\"span\",{class:\"badge  \",style:{backgroundColor:'#3B82F6',color:'white',fontSize:'50px',padding:'10px',borderRadius:'10px',margin:'10px',textAlign:'center',display:'block'},children:\"Product\"}),product.length<1&&/*#__PURE__*/_jsx(\"p\",{children:\"No Product found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row pb-5\",children:product.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mt-3\",children:/*#__PURE__*/_jsx(ProductCart,{product:item})},index);})})]})]})})});};export default Shop;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","ProductCart","Slider","Checkbox","listProduct","searchFilters","listCategory","Shop","product","setProduct","loading","setLoading","price","setPrice","ok","setOk","category","setCategory","categorySelect","setCategorySelect","state","search","text","loadData","then","res","data","catch","err","console","log","delay","setTimeout","fetchDataFilter","query","clearTimeout","arg","handlePrice","value","handleCheck","e","inCheck","target","inState","findCheck","indexOf","push","splice","length","backgroundColor","height","borderRadius","map","item","index","_id","name","color","fontSize","padding","margin","textAlign","display"],"sources":["E:/Mern login/client/src/components/pages/Shop.js"],"sourcesContent":["// rafce\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport ProductCart from \"../card/ProductCard\";\r\n\r\n// antd\r\nimport { Slider, Checkbox } from \"antd\";\r\n\r\n// function\r\nimport { listProduct, searchFilters } from \"../functions/product\";\r\nimport { listCategory } from \"../functions/category\";\r\n\r\nconst Shop = () => {\r\n  const [product, setProduct] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [price, setPrice] = useState([0, 0]);\r\n  const [ok, setOk] = useState(false);\r\n\r\n  // Category\r\n  const [category, setCategory] = useState([]);\r\n  const [categorySelect, setCategorySelect] = useState([]);\r\n\r\n  const { search } = useSelector((state) => ({ ...state }));\r\n  // console.log(search.text)\r\n  const { text } = search;\r\n  // text\r\n\r\n  // 1. Load All Data\r\n  useEffect(() => {\r\n    //code\r\n    loadData();\r\n    listCategory().then((res) => setCategory(res.data));\r\n  }, []);\r\n\r\n  const loadData = () => {\r\n    setLoading(true);\r\n    // code\r\n    listProduct(12)\r\n      .then((res) => {\r\n        setProduct(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  // 2. load data Text\r\n  useEffect(() => {\r\n    const delay = setTimeout(() => {\r\n      fetchDataFilter({ query: text });\r\n      if (!text) {\r\n        loadData();\r\n      }\r\n    }, 300);\r\n    return () => clearTimeout(delay);\r\n  }, [text]);\r\n\r\n  // Filter\r\n  const fetchDataFilter = (arg) => {\r\n    searchFilters(arg).then((res) => {\r\n      setProduct(res.data);\r\n    });\r\n  };\r\n\r\n  // 3. Load on Slider\r\n  useEffect(() => {\r\n    fetchDataFilter({ price }); // [0,0]\r\n  }, [ok]);\r\n\r\n  const handlePrice = (value) => {\r\n    setPrice(value);\r\n\r\n    setTimeout(() => {\r\n      setOk(!ok);\r\n    }, 300);\r\n  };\r\n  const handleCheck = (e) => {\r\n    // ค่าปัจจุบันที่ Check\r\n    let inCheck = e.target.value;\r\n\r\n    // ค่าเดิมของ Check\r\n    let inState = [...categorySelect];\r\n\r\n    let findCheck = inState.indexOf(inCheck);\r\n\r\n    if (findCheck === -1) {\r\n      inState.push(inCheck);\r\n    } else {\r\n      inState.splice(findCheck, 1);\r\n    }\r\n    setCategorySelect(inState);\r\n    fetchDataFilter({ category: inState }); // [0,0]\r\n    if(inState.length <1){\r\n      loadData()\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container-fluid \" >\r\n        <div className=\"row\">\r\n          <div className=\"col-md-3 \" style={{backgroundColor : '#F1F0F0' , height: '94vh' , borderRadius : '10px' }}>\r\n          <h4 className=\"mt-3 \" > Filter / Search</h4>\r\n            <hr />\r\n            <h6 >ค้นหาด้วยราคาสินค้า</h6>\r\n            <Slider value={price} onChange={handlePrice} range max={5000} />\r\n            <hr />\r\n            <h6>ค้นหาตามหมวดหมู่สินค้า</h6>\r\n            {category.map((item, index) => (\r\n              <Checkbox onChange={handleCheck} value={item._id}>\r\n                {item.name}\r\n              </Checkbox>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"col-md-9\">\r\n            {loading ? (\r\n              <h4 className=\"text-danger\">Loading...</h4>\r\n            ) : (\r\n              <span class=\"badge  \" style={ {backgroundColor: '#3B82F6', color: 'white', fontSize: '50px', padding: '10px', borderRadius: '10px', margin: '10px', textAlign: 'center', display: 'block'} }>Product</span>\r\n            )}\r\n\r\n            {product.length < 1 && <p>No Product found</p>}\r\n\r\n            <div className=\"row pb-5\">\r\n              {product.map((item, index) => (\r\n                <div key={index} className=\"col-md-4 mt-3\">\r\n                  <ProductCart product={item} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}