{"ast":null,"code":"//rafce\nimport React from\"react\";import{useDispatch}from\"react-redux\";import{toast}from\"react-toastify\";import{DeleteOutlined}from'@ant-design/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductTableInCart=function ProductTableInCart(_ref){var item=_ref.item;var dispatch=useDispatch();var handleChangeCount=function handleChangeCount(e){var count=e.target.value<1?1:e.target.value;if(count>item.quantity){toast.error('Max avialable Quantity: '+item.quantity);return;}var cart=[];if(localStorage.getItem(\"cart\")){cart=JSON.parse(localStorage.getItem(\"cart\"));}cart.map(function(product,i){if(product._id==item._id){cart[i].count=count;}});localStorage.setItem(\"cart\",JSON.stringify(cart));dispatch({type:\"ADD_TO_CART\",payload:cart});};var handleRemove=function handleRemove(){var cart=[];if(localStorage.getItem(\"cart\")){cart=JSON.parse(localStorage.getItem(\"cart\"));}cart.map(function(product,i){if(product._id==item._id){cart.splice(i,1);}});localStorage.setItem(\"cart\",JSON.stringify(cart));dispatch({type:\"ADD_TO_CART\",payload:cart});};return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.images[0].url,width:\"100\"})}),/*#__PURE__*/_jsx(\"td\",{children:item.title}),/*#__PURE__*/_jsx(\"td\",{children:item.price}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{onChange:handleChangeCount,className:\"form-control\",value:item.count,type:\"number\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(DeleteOutlined,{onClick:handleRemove,className:\"text-danger\"})})]})});};export default ProductTableInCart;","map":{"version":3,"names":["React","useDispatch","toast","DeleteOutlined","ProductTableInCart","item","dispatch","handleChangeCount","e","count","target","value","quantity","error","cart","localStorage","getItem","JSON","parse","map","product","i","_id","setItem","stringify","type","payload","handleRemove","splice","images","url","title","price"],"sources":["E:/Mern login/client/src/components/card/ProductTableInCart.js"],"sourcesContent":["//rafce\r\nimport React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { DeleteOutlined } from '@ant-design/icons'\r\n\r\n\r\nconst ProductTableInCart = ({ item }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleChangeCount = (e) => {\r\n    const count = e.target.value < 1 ? 1 : e.target.value;\r\n\r\n    if( count > item.quantity){\r\n        toast.error('Max avialable Quantity: '+item.quantity)\r\n        return;\r\n    }\r\n\r\n    let cart = [];\r\n    if (localStorage.getItem(\"cart\")) {\r\n      cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    }\r\n\r\n    cart.map((product, i) => {\r\n      if (product._id == item._id) {\r\n        cart[i].count = count;\r\n      }\r\n    });\r\n\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    dispatch({\r\n      type: \"ADD_TO_CART\",\r\n      payload: cart,\r\n    });\r\n  };\r\n\r\n  const handleRemove = ()=>{\r\n    let cart = [];\r\n    if (localStorage.getItem(\"cart\")) {\r\n      cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    }\r\n\r\n    cart.map((product, i) => {\r\n      if (product._id == item._id) {\r\n        cart.splice(i,1)\r\n      }\r\n    });\r\n\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    dispatch({\r\n      type: \"ADD_TO_CART\",\r\n      payload: cart,\r\n    });\r\n  }\r\n  return (\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          <img src={item.images[0].url} width=\"100\" />\r\n        </td>\r\n        <td>{item.title}</td>\r\n        <td>{item.price}</td>\r\n\r\n        <td>\r\n          <input\r\n            onChange={handleChangeCount}\r\n            className=\"form-control\"\r\n            value={item.count}\r\n            type=\"number\"\r\n          />\r\n        </td>\r\n\r\n        <td>\r\n          <DeleteOutlined \r\n          onClick={handleRemove}\r\n        className=\"text-danger\"/>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  );\r\n};\r\n\r\nexport default ProductTableInCart;\r\n"],"mappings":"AAAA;AACA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,cAAT,KAA+B,mBAA/B,C,wFAGA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,MAAc,IAAXC,KAAW,MAAXA,IAAW,CACvC,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CAEA,GAAMM,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,CAAD,CAAO,CAC/B,GAAMC,MAAK,CAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAiB,CAAjB,CAAqB,CAArB,CAAyBH,CAAC,CAACE,MAAF,CAASC,KAAhD,CAEA,GAAIF,KAAK,CAAGJ,IAAI,CAACO,QAAjB,CAA0B,CACtBV,KAAK,CAACW,KAAN,CAAY,2BAA2BR,IAAI,CAACO,QAA5C,EACA,OACH,CAED,GAAIE,KAAI,CAAG,EAAX,CACA,GAAIC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAJ,CAAkC,CAChCF,IAAI,CAAGG,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAP,CACD,CAEDF,IAAI,CAACK,GAAL,CAAS,SAACC,OAAD,CAAUC,CAAV,CAAgB,CACvB,GAAID,OAAO,CAACE,GAAR,EAAejB,IAAI,CAACiB,GAAxB,CAA6B,CAC3BR,IAAI,CAACO,CAAD,CAAJ,CAAQZ,KAAR,CAAgBA,KAAhB,CACD,CACF,CAJD,EAMAM,YAAY,CAACQ,OAAb,CAAqB,MAArB,CAA6BN,IAAI,CAACO,SAAL,CAAeV,IAAf,CAA7B,EACAR,QAAQ,CAAC,CACPmB,IAAI,CAAE,aADC,CAEPC,OAAO,CAAEZ,IAFF,CAAD,CAAR,CAID,CAxBD,CA0BA,GAAMa,aAAY,CAAG,QAAfA,aAAe,EAAI,CACvB,GAAIb,KAAI,CAAG,EAAX,CACA,GAAIC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAJ,CAAkC,CAChCF,IAAI,CAAGG,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAP,CACD,CAEDF,IAAI,CAACK,GAAL,CAAS,SAACC,OAAD,CAAUC,CAAV,CAAgB,CACvB,GAAID,OAAO,CAACE,GAAR,EAAejB,IAAI,CAACiB,GAAxB,CAA6B,CAC3BR,IAAI,CAACc,MAAL,CAAYP,CAAZ,CAAc,CAAd,EACD,CACF,CAJD,EAMAN,YAAY,CAACQ,OAAb,CAAqB,MAArB,CAA6BN,IAAI,CAACO,SAAL,CAAeV,IAAf,CAA7B,EACAR,QAAQ,CAAC,CACPmB,IAAI,CAAE,aADC,CAEPC,OAAO,CAAEZ,IAFF,CAAD,CAAR,CAID,CAjBD,CAkBA,mBACE,oCACE,mCACE,iCACE,YAAK,GAAG,CAAET,IAAI,CAACwB,MAAL,CAAY,CAAZ,EAAeC,GAAzB,CAA8B,KAAK,CAAC,KAApC,EADF,EADF,cAIE,oBAAKzB,IAAI,CAAC0B,KAAV,EAJF,cAKE,oBAAK1B,IAAI,CAAC2B,KAAV,EALF,cAOE,iCACE,cACE,QAAQ,CAAEzB,iBADZ,CAEE,SAAS,CAAC,cAFZ,CAGE,KAAK,CAAEF,IAAI,CAACI,KAHd,CAIE,IAAI,CAAC,QAJP,EADF,EAPF,cAgBE,iCACE,KAAC,cAAD,EACA,OAAO,CAAEkB,YADT,CAEF,SAAS,CAAC,aAFR,EADF,EAhBF,GADF,EADF,CA0BD,CAzED,CA2EA,cAAevB,mBAAf"},"metadata":{},"sourceType":"module"}