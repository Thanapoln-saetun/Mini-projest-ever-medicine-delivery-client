{"ast":null,"code":"import _slicedToArray from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useSelector}from\"react-redux\";import MenubarUser from\"../../layouts/MenubarUser\";import{getOrders}from\"../../functions/users\";import{Document,Page,Text,View,StyleSheet,PDFDownloadLink}from\"@react-pdf/renderer\";import Invoice from\"../../order/Invoice\";//antd\nimport{Space,Table,Tag}from'antd';import Item from\"antd/lib/list/Item\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var History=function History(){var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];useEffect(function(){//code\nloadData();},[]);var loadData=function loadData(){getOrders(user.token).then(function(res){return setOrders(res.data);});console.log(orders);};var columns=[{title:\"รายการสินค้า\",render:function render(item,i){return/*#__PURE__*/_jsx(\"ol\",{children:item.products.map(function(p,i){return/*#__PURE__*/_jsx(\"li\",{children:p.product.title});})});}},{title:\"ราคาสินค้า\",render:function render(item,i){return/*#__PURE__*/_jsx(_Fragment,{children:item.products.map(function(p,i){return/*#__PURE__*/_jsxs(\"li\",{children:[p.price,\" \\u0E1A\\u0E32\\u0E17\"]});})});}},{title:\"จำนวนสินค้า\",render:function render(item,i){return/*#__PURE__*/_jsx(_Fragment,{children:item.products.map(function(p,i){return/*#__PURE__*/_jsxs(\"li\",{children:[p.count,\" \\u0E0A\\u0E34\\u0E49\\u0E19\"]});})});}},{title:\"ค่าจัดส่ง\",render:function render(item,i){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"li\",{children:\"35 \\u0E1A\\u0E32\\u0E17\"})});}},{title:'ราคารวมสุทธิ',key:'cartTotal',dataIndex:'cartTotal',render:function render(item,i){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"li\",{children:[item,\" \\u0E1A\\u0E32\\u0E17\"]})});}},{title:'สถานะ',key:'orderstatus',dataIndex:'orderstatus'},{title:'ใบเสร็จชำระ',render:function render(item,i){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(PDFDownloadLink,{document:/*#__PURE__*/_jsx(Invoice,{order:item}),fileName:\"Receipt.pdf\",className:\"btn btn-primary \",children:\"PDF\"})})});}}];return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(MenubarUser,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col text-center \",children:[/*#__PURE__*/_jsx(\"span\",{class:\"badge \",style:{backgroundColor:'#3B82F6',color:'white',fontSize:'50px',padding:'10px',borderRadius:'10px',margin:'10px',textAlign:'center',display:'block'},children:\"Order History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:orders})})]})]})});};export default History;","map":{"version":3,"names":["React","useState","useEffect","useSelector","MenubarUser","getOrders","Document","Page","Text","View","StyleSheet","PDFDownloadLink","Invoice","Space","Table","Tag","Item","History","state","user","orders","setOrders","loadData","token","then","res","data","console","log","columns","title","render","item","i","products","map","p","product","price","count","key","dataIndex","backgroundColor","color","fontSize","padding","borderRadius","margin","textAlign","display"],"sources":["E:/Mern login/client/src/components/pages/user/History.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport MenubarUser from \"../../layouts/MenubarUser\";\r\nimport { getOrders } from \"../../functions/users\";\r\nimport {\r\n  Document,\r\n  Page,\r\n  Text,\r\n  View,\r\n  StyleSheet,\r\n  PDFDownloadLink,\r\n} from \"@react-pdf/renderer\";\r\n\r\nimport Invoice from \"../../order/Invoice\";\r\n\r\n\r\n//antd\r\nimport { Space, Table, Tag } from 'antd';\r\nimport Item from \"antd/lib/list/Item\";\r\n\r\nconst History = () => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const [orders, setOrders] = useState([]);\r\n  useEffect(() => {\r\n    //code\r\n    loadData();\r\n   \r\n  }, []);\r\n\r\n  const loadData = () => {\r\n    getOrders(user.token).then((res) => setOrders(res.data));\r\n    console.log(orders);\r\n  };\r\n\r\n\r\n\r\n  const columns = [\r\n    {\r\n      title: \"รายการสินค้า\",\r\n      render: (item, i) => (\r\n        <ol>\r\n    \r\n          {item.products.map((p, i) => (\r\n             \r\n            <li>\r\n              {p.product.title}\r\n            </li>\r\n           \r\n          ))}\r\n    \r\n    </ol>\r\n      ),\r\n    },\r\n    {\r\n      title: \"ราคาสินค้า\",\r\n      render: (item, i) => (\r\n        <>\r\n          {item.products.map((p, i) => (\r\n          \r\n          <li>\r\n              \r\n                {p.price} บาท\r\n                </li>\r\n           \r\n          ))}\r\n        </>\r\n      ),\r\n    },\r\n    {\r\n      title: \"จำนวนสินค้า\",\r\n      render: (item, i) => (\r\n        <>\r\n          {item.products.map((p, i) => (\r\n          \r\n           \r\n              <li>\r\n                {p.count} ชิ้น\r\n              </li>\r\n           \r\n          ))}\r\n        </>\r\n      ),\r\n    },\r\n    {\r\n      title: \"ค่าจัดส่ง\",\r\n      render: (item, i) => (\r\n        <>\r\n              <li>\r\n                35 บาท\r\n              </li>\r\n    \r\n        </>\r\n      ),\r\n    },\r\n    {\r\n      title: 'ราคารวมสุทธิ',\r\n      key: 'cartTotal',\r\n      dataIndex: 'cartTotal' ,\r\n      render: (item, i) => (\r\n        <>\r\n              <li>\r\n                {item} บาท\r\n              </li>\r\n\r\n        </>\r\n      ),\r\n     \r\n     \r\n    },\r\n    {\r\n      \r\n      title: 'สถานะ',\r\n      key: 'orderstatus',\r\n      dataIndex: 'orderstatus',\r\n      \r\n    },\r\n    {\r\n      \r\n      title: 'ใบเสร็จชำระ',\r\n      render: (item, i) => (\r\n        <>\r\n       \r\n          \r\n           \r\n              <li>\r\n                <PDFDownloadLink\r\n                        document={<Invoice order={item} />}\r\n                        fileName=\"Receipt.pdf\"\r\n                        className=\"btn btn-primary \"\r\n                      >\r\n                        PDF\r\n                      </PDFDownloadLink>\r\n              </li>\r\n           \r\n         \r\n        </>\r\n      ),\r\n    },\r\n  ];\r\n\r\n\r\n\r\n  return (\r\n\r\n   \r\n    \r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <MenubarUser />\r\n        </div>\r\n\r\n        <div className=\"col text-center \">\r\n        <span class=\"badge \" style={ {backgroundColor: '#3B82F6', color: 'white', fontSize: '50px', padding: '10px', borderRadius: '10px', margin: '10px', textAlign: 'center', display: 'block'} }>Order History</span>\r\n        {/* <h1>History Page User</h1> */}\r\n          <div className=\"row\">\r\n            {/* 1 Loop Order Card */}\r\n            <Table columns={columns} dataSource={orders}/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  \r\n  );\r\n};\r\n\r\nexport default History;\r\n"],"mappings":"mNAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,YAAP,KAAwB,2BAAxB,CACA,OAASC,SAAT,KAA0B,uBAA1B,CACA,OACEC,QADF,CAEEC,IAFF,CAGEC,IAHF,CAIEC,IAJF,CAKEC,UALF,CAMEC,eANF,KAOO,qBAPP,CASA,MAAOC,QAAP,KAAoB,qBAApB,CAGA;AACA,OAASC,KAAT,CAAgBC,KAAhB,CAAuBC,GAAvB,KAAkC,MAAlC,CACA,MAAOC,KAAP,KAAiB,oBAAjB,C,6IAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CACpB,iBAAiBd,WAAW,CAAC,SAACe,KAAD,0BAAiBA,KAAjB,GAAD,CAA5B,CAAQC,IAAR,cAAQA,IAAR,CAEA,cAA4BlB,QAAQ,CAAC,EAAD,CAApC,wCAAOmB,MAAP,eAAeC,SAAf,eACAnB,SAAS,CAAC,UAAM,CACd;AACAoB,QAAQ,GAET,CAJQ,CAIN,EAJM,CAAT,CAMA,GAAMA,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACrBjB,SAAS,CAACc,IAAI,CAACI,KAAN,CAAT,CAAsBC,IAAtB,CAA2B,SAACC,GAAD,QAASJ,UAAS,CAACI,GAAG,CAACC,IAAL,CAAlB,EAA3B,EACAC,OAAO,CAACC,GAAR,CAAYR,MAAZ,EACD,CAHD,CAOA,GAAMS,QAAO,CAAG,CACd,CACEC,KAAK,CAAE,cADT,CAEEC,MAAM,CAAE,gBAACC,IAAD,CAAOC,CAAP,qBACN,oBAEGD,IAAI,CAACE,QAAL,CAAcC,GAAd,CAAkB,SAACC,CAAD,CAAIH,CAAJ,qBAEjB,oBACGG,CAAC,CAACC,OAAF,CAAUP,KADb,EAFiB,EAAlB,CAFH,EADM,EAFV,CADc,CAiBd,CACEA,KAAK,CAAE,YADT,CAEEC,MAAM,CAAE,gBAACC,IAAD,CAAOC,CAAP,qBACN,yBACGD,IAAI,CAACE,QAAL,CAAcC,GAAd,CAAkB,SAACC,CAAD,CAAIH,CAAJ,qBAEnB,sBAEOG,CAAC,CAACE,KAFT,yBAFmB,EAAlB,CADH,EADM,EAFV,CAjBc,CAgCd,CACER,KAAK,CAAE,aADT,CAEEC,MAAM,CAAE,gBAACC,IAAD,CAAOC,CAAP,qBACN,yBACGD,IAAI,CAACE,QAAL,CAAcC,GAAd,CAAkB,SAACC,CAAD,CAAIH,CAAJ,qBAGf,sBACGG,CAAC,CAACG,KADL,+BAHe,EAAlB,CADH,EADM,EAFV,CAhCc,CA+Cd,CACET,KAAK,CAAE,WADT,CAEEC,MAAM,CAAE,gBAACC,IAAD,CAAOC,CAAP,qBACN,sCACM,6CADN,EADM,EAFV,CA/Cc,CA0Dd,CACEH,KAAK,CAAE,cADT,CAEEU,GAAG,CAAE,WAFP,CAGEC,SAAS,CAAE,WAHb,CAIEV,MAAM,CAAE,gBAACC,IAAD,CAAOC,CAAP,qBACN,sCACM,sBACGD,IADH,yBADN,EADM,EAJV,CA1Dc,CAyEd,CAEEF,KAAK,CAAE,OAFT,CAGEU,GAAG,CAAE,aAHP,CAIEC,SAAS,CAAE,aAJb,CAzEc,CAgFd,CAEEX,KAAK,CAAE,aAFT,CAGEC,MAAM,CAAE,gBAACC,IAAD,CAAOC,CAAP,qBACN,sCAIM,iCACE,KAAC,eAAD,EACQ,QAAQ,cAAE,KAAC,OAAD,EAAS,KAAK,CAAED,IAAhB,EADlB,CAEQ,QAAQ,CAAC,aAFjB,CAGQ,SAAS,CAAC,kBAHlB,iBADF,EAJN,EADM,EAHV,CAhFc,CAAhB,CA0GA,mBAIE,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,WAAD,IADF,EADF,cAKE,aAAK,SAAS,CAAC,kBAAf,wBACA,aAAM,KAAK,CAAC,QAAZ,CAAqB,KAAK,CAAG,CAACU,eAAe,CAAE,SAAlB,CAA6BC,KAAK,CAAE,OAApC,CAA6CC,QAAQ,CAAE,MAAvD,CAA+DC,OAAO,CAAE,MAAxE,CAAgFC,YAAY,CAAE,MAA9F,CAAsGC,MAAM,CAAE,MAA9G,CAAsHC,SAAS,CAAE,QAAjI,CAA2IC,OAAO,CAAE,OAApJ,CAA7B,2BADA,cAGE,YAAK,SAAS,CAAC,KAAf,uBAEE,KAAC,KAAD,EAAO,OAAO,CAAEpB,OAAhB,CAAyB,UAAU,CAAET,MAArC,EAFF,EAHF,GALF,GADF,EAJF,CAuBD,CAlJD,CAoJA,cAAeH,QAAf"},"metadata":{},"sourceType":"module"}