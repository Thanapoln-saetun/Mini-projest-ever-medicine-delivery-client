{"ast":null,"code":"import _defineProperty from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// rafce\nimport React,{useState,useEffect}from\"react\";import MenubarAdmin from\"../../../layouts/MenubarAdmin\";import{useSelector}from\"react-redux\";import{useParams,useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import FileUpload from\"./FileUpload\";// function\nimport{readProduct,updateProduct}from\"../../../functions/product\";import{listCategory}from\"../../../functions/category\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialstate={title:\"\",description:\"\",categories:[],category:\"\",price:\"\",quantity:\"\",images:[]};var UpdateProduct=function UpdateProduct(){var params=useParams();var navigate=useNavigate();var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState(initialstate),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];useEffect(function(){// code\nloadData();},[]);var loadData=function loadData(){readProduct(params.id).then(function(res){//code\nsetValues(_objectSpread(_objectSpread({},values),res.data));}).catch(function(err){console.log(err);});listCategory(user.token).then(function(res){//code\nsetCategory(res.data);}).catch(function(err){console.log(err);});};console.log(values);console.log(category);var handleChange=function handleChange(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){setLoading(true);e.preventDefault();updateProduct(user.token,values._id,values).then(function(res){setLoading(false);toast.success('Update '+res.data.title+\" Success\");console.log(res);navigate('/admin/index');}).catch(function(err){toast.error('Update Error');setLoading(false);console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(MenubarAdmin,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[loading?/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{class:\"badge\",style:{backgroundColor:'#3B82F6',color:'white',fontSize:'50px',padding:'10px',borderRadius:'10px',margin:'10px',textAlign:'center',display:'block'},children:\"Product Update\"}),\" \"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-2\",type:\"text\",name:\"title\",value:values.title,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-2\",type:\"number\",name:\"price\",value:values.price,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-2\",type:\"number\",name:\"quantity\",value:values.quantity,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control mt-2\",name:\"category\",onChange:handleChange,value:values.category._id,required:true,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Please Select\"}),category.length>0&&category.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item._id,children:item.name},item._id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control mt-2\",type:\"text\",name:\"description\",value:values.description,onChange:handleChange,rows:\"3\"})]}),/*#__PURE__*/_jsx(FileUpload,{loading:loading,setLoading:setLoading,values:values,setValues:setValues}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-5\",children:\"Submit\"})]})]})]})});};export default UpdateProduct;","map":{"version":3,"names":["React","useState","useEffect","MenubarAdmin","useSelector","useParams","useNavigate","toast","FileUpload","readProduct","updateProduct","listCategory","initialstate","title","description","categories","category","price","quantity","images","UpdateProduct","params","navigate","state","user","values","setValues","setCategory","loading","setLoading","loadData","id","then","res","data","catch","err","console","log","token","handleChange","e","target","name","value","handleSubmit","preventDefault","_id","success","error","backgroundColor","color","fontSize","padding","borderRadius","margin","textAlign","display","length","map","item"],"sources":["E:/Mern login/client/src/components/pages/admin/product/UpdateProduct.js"],"sourcesContent":["// rafce\r\nimport React, { useState, useEffect } from \"react\";\r\nimport MenubarAdmin from \"../../../layouts/MenubarAdmin\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport FileUpload from \"./FileUpload\";\r\n// function\r\nimport { readProduct, updateProduct } from \"../../../functions/product\";\r\nimport { listCategory } from \"../../../functions/category\";\r\n\r\nconst initialstate = {\r\n  title: \"\",\r\n  description: \"\",\r\n  categories: [],\r\n  category: \"\",\r\n  price: \"\",\r\n  quantity: \"\",\r\n  images: [],\r\n};\r\n\r\nconst UpdateProduct = () => {\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const [values, setValues] = useState(initialstate);\r\n  const [category, setCategory] = useState([]);\r\n  const [loading,setLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // code\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = () => {\r\n    readProduct(params.id)\r\n      .then((res) => {\r\n        //code\r\n        setValues({ ...values, ...res.data });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    listCategory(user.token)\r\n      .then((res) => {\r\n        //code\r\n        setCategory(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  console.log(values);\r\n  console.log(category);\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    setLoading(true)\r\n    e.preventDefault();\r\n    updateProduct(user.token,values._id,values)\r\n      .then((res)=>{\r\n\r\n        setLoading(false)\r\n        toast.success('Update '+res.data.title+\" Success\")\r\n        console.log(res)\r\n        navigate('/admin/index')\r\n      }).catch((err)=>{\r\n        toast.error('Update Error')\r\n        setLoading(false)\r\n        console.log(err)\r\n      })\r\n  };\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <MenubarAdmin />\r\n        </div>\r\n\r\n        <div className=\"col\">\r\n          {loading \r\n          ? <h1>Loading...</h1>\r\n          : <h1><span class=\"badge\" style={ {backgroundColor: '#3B82F6', color: 'white', fontSize: '50px', padding: '10px', borderRadius: '10px', margin: '10px', textAlign: 'center', display: 'block'} }>Product Update</span> </h1>\r\n        }\r\n          \r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Title</label>\r\n              <input\r\n                className=\"form-control mt-2\"\r\n                type=\"text\"\r\n                name=\"title\"\r\n                value={values.title}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n         \r\n\r\n            <div className=\"form-group mt-2\">\r\n              <label>Price</label>\r\n              <input\r\n                className=\"form-control mt-2\"\r\n                type=\"number\"\r\n                name=\"price\"\r\n                value={values.price}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Quantity</label>\r\n              <input\r\n                className=\"form-control mt-2\"  \r\n                type=\"number\"\r\n                name=\"quantity\"\r\n                value={values.quantity}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n           \r\n            <div className=\"form-group mt-2\">\r\n              <label>Category</label>\r\n              <select\r\n                className=\"form-control mt-2\"\r\n                name=\"category\"\r\n                onChange={handleChange}\r\n                value={values.category._id}\r\n                required\r\n              >\r\n                <option>Please Select</option>\r\n                {category.length > 0 &&\r\n                  category.map((item) => (\r\n                    <option key={item._id} value={item._id}>\r\n                      {item.name}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Description</label>\r\n              <textarea \r\n                className=\"form-control mt-2\"\r\n                type=\"text\"\r\n                name=\"description\"\r\n                value={values.description}\r\n                onChange={handleChange}\r\n                rows=\"3\"\r\n              />\r\n            </div>\r\n            <FileUpload\r\n              loading={loading}\r\n              setLoading={setLoading}\r\n              values={values}\r\n              setValues={setValues}\r\n            />\r\n\r\n            <button className=\"btn btn-primary mb-5\">Submit</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdateProduct;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}