{"ast":null,"code":"import _defineProperty from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import MenubarAdmin from\"../../../layouts/MenubarAdmin\";import{toast}from\"react-toastify\";import{useSelector}from\"react-redux\";// functions\nimport{createProduct}from\"../../../functions/product\";import{listCategory}from\"../../../functions/category\";import FileUpload from\"./FileUpload\";import{Spin}from'antd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialstate={title:\"ยา\",description:\"รายละเอียดยา\",categories:[],category:\"\",price:\"100\",quantity:\"5\",images:[]};var Home=function Home(){var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState(initialstate),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){loadData(user.token);},[]);var loadData=function loadData(authtoken){listCategory(authtoken).then(function(res){setValues(_objectSpread(_objectSpread({},values),{},{categories:res.data}));}).catch(function(err){console.log(err);});};console.log(\"values\",values);var handleChange=function handleChange(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();createProduct(user.token,values)//ส่งค่าไปที่ function createProduct\n.then(function(res){console.log(res);toast.success(\"Insert \"+res.data.title+\" Success!!\");//แสดงข้อความเมื่อเพิ่มข้อมูลสำเร็จ\nwindow.location.reload();}).catch(function(err){console.log(err.response);toast.error(err.response.data);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(MenubarAdmin,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[loading?/*#__PURE__*/_jsxs(\"h1\",{children:[\"Loading...\",/*#__PURE__*/_jsx(Spin,{})]})//true\n:/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(\"span\",{class:\"badge\",style:{backgroundColor:'#3B82F6',color:'white',fontSize:'50px',padding:'10px',borderRadius:'10px',margin:'10px',textAlign:'center',display:'block'},children:\"Create Product\"})})//false\n,/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-2\",type:\"text\",name:\"title\",value:values.title,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-2\",type:\"number\",name:\"price\",value:values.price,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-2\",type:\"number\",name:\"quantity\",value:values.quantity,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control mt-2\",name:\"category\",onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Please Select\"}),values.categories.length>0&&values.categories.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item._id,children:item.name},item._id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control mt-2\",type:\"text\",name:\"description\",value:values.description,onChange:handleChange,rows:\"3\"})]}),/*#__PURE__*/_jsx(FileUpload,{loading:loading,setLoading:setLoading,values:values,setValues:setValues}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Submit\"})]})]})]})});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","MenubarAdmin","toast","useSelector","createProduct","listCategory","FileUpload","Spin","initialstate","title","description","categories","category","price","quantity","images","Home","state","user","values","setValues","loading","setLoading","loadData","token","authtoken","then","res","data","catch","err","console","log","handleChange","e","target","name","value","handleSubmit","preventDefault","success","window","location","reload","response","error","backgroundColor","color","fontSize","padding","borderRadius","margin","textAlign","display","length","map","item","_id"],"sources":["E:/Mern login/client/src/components/pages/admin/product/CreateProduct.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport MenubarAdmin from \"../../../layouts/MenubarAdmin\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\n// functions\r\nimport { createProduct } from \"../../../functions/product\";\r\nimport { listCategory } from \"../../../functions/category\";\r\n\r\nimport FileUpload from \"./FileUpload\";\r\nimport { Spin } from 'antd';\r\n\r\n\r\nconst initialstate = {\r\n  title: \"ยา\",\r\n  description: \"รายละเอียดยา\",\r\n  categories: [],\r\n  category: \"\",\r\n  price: \"100\",\r\n  quantity: \"5\",\r\n  images: [],\r\n};\r\n\r\nconst Home = () => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  const [values, setValues] = useState(initialstate);\r\n  const [loading,setLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    loadData(user.token);\r\n  }, []);\r\n\r\n  const loadData = (authtoken) => {\r\n    listCategory(authtoken)\r\n      .then((res) => {\r\n        setValues({ ...values, categories: res.data });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  console.log(\"values\", values);\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    createProduct(user.token, values)//ส่งค่าไปที่ function createProduct\r\n      .then((res) => {\r\n        console.log(res);\r\n        toast.success(\"Insert \" + res.data.title + \" Success!!\");//แสดงข้อความเมื่อเพิ่มข้อมูลสำเร็จ\r\n        window.location.reload()\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.response);\r\n        toast.error(err.response.data);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <MenubarAdmin />\r\n        </div>\r\n\r\n        <div className=\"col\">\r\n          {loading\r\n            ? <h1>Loading...<Spin /></h1>//true\r\n            : <h1><span class=\"badge\" style={ {backgroundColor: '#3B82F6', color: 'white', fontSize: '50px', padding: '10px', borderRadius: '10px', margin: '10px', textAlign: 'center', display: 'block'} }>Create Product</span></h1>//false\r\n          }\r\n          \r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Title</label>\r\n              <input\r\n                className=\"form-control mt-2\"\r\n                type=\"text\"\r\n                name=\"title\"\r\n                value={values.title}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n        \r\n\r\n            <div className=\"form-group mt-2\">\r\n              <label>Price</label>\r\n              <input\r\n                className=\"form-control mt-2\"\r\n                type=\"number\"\r\n                name=\"price\"\r\n                value={values.price}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          \r\n           \r\n            <div className=\"form-group mt-2\">\r\n              <label>Quantity</label>\r\n              <input\r\n                className=\"form-control mt-2\"\r\n                type=\"number\"\r\n                name=\"quantity\"\r\n                value={values.quantity}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group mt-2\">\r\n              <label>Category</label>\r\n              <select\r\n                className=\"form-control mt-2\"\r\n                name=\"category\"\r\n                onChange={handleChange}\r\n                required\r\n              >\r\n                <option>Please Select</option>\r\n                {values.categories.length > 0 &&\r\n                  values.categories.map((item) => (\r\n                    <option key={item._id} value={item._id}>\r\n                      {item.name}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Description</label>\r\n              <textarea \r\n                className=\"form-control mt-2\"\r\n                type=\"text\"\r\n                name=\"description\"\r\n                value={values.description}\r\n                onChange={handleChange}\r\n                rows=\"3\"\r\n              />\r\n            </div>\r\n\r\n            <FileUpload \r\n            loading={loading}\r\n            setLoading={setLoading}\r\n            values={values} \r\n            setValues={setValues} \r\n            />\r\n\r\n            <button className=\"btn btn-primary\">Submit</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}