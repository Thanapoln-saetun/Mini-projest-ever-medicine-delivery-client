{"ast":null,"code":"var _jsxFileName = \"E:\\\\Mern login\\\\client\\\\src\\\\components\\\\routes\\\\AdminRoute.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux'; // useSelector ตัวเข้าถึง store \n\nimport LoadingToRedirect from './LoadingToRedirect';\nimport { currentAdmin } from '../functions/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminRoute = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  })); // ตัวเข้าถึง store ของ user\n\n  const [ok, setOk] = useState(false); // เก็บค่าสถานะการเข้าถึง page จะเปลี่ยนเป็น true ถ้าไม่สิทธิ์เข้า page จะ redirect ไปหน้าแรก\n\n  useEffect(() => {\n    if (user && user.token) {\n      currentAdmin(user.token).then(res => {\n        console.log(res);\n        setOk(true);\n      }).catch(err => {\n        console.log(err);\n        setOk(false);\n      });\n    }\n  }, []);\n  return ok ? children : /*#__PURE__*/_jsxDEV(LoadingToRedirect, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this); // ถ้าไม่ใช่ user ให้ไปหน้าที่ LoadingToRedirect\n};\n\n_s(AdminRoute, \"wBhjhzGBq1sJowQkY90HFv97Gs4=\", false, function () {\n  return [useSelector];\n});\n\n_c = AdminRoute;\nexport default AdminRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminRoute\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","LoadingToRedirect","currentAdmin","AdminRoute","children","user","state","ok","setOk","token","then","res","console","log","catch","err"],"sources":["E:/Mern login/client/src/components/routes/AdminRoute.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport { useSelector } from 'react-redux'// useSelector ตัวเข้าถึง store \r\nimport LoadingToRedirect from './LoadingToRedirect'\r\nimport { currentAdmin } from '../functions/auth'\r\n\r\nconst AdminRoute = ({children}) => {\r\n\r\n  const { user } = useSelector(state => ({...state}));// ตัวเข้าถึง store ของ user\r\n  const [ok, setOk] = useState(false);// เก็บค่าสถานะการเข้าถึง page จะเปลี่ยนเป็น true ถ้าไม่สิทธิ์เข้า page จะ redirect ไปหน้าแรก\r\n\r\n  useEffect(() => {\r\n    if(user && user.token){\r\n      currentAdmin(user.token)\r\n      .then(res => {\r\n        console.log( res)\r\n          setOk(true);\r\n       \r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        setOk(false);\r\n      })\r\n    }\r\n  },[])\r\n\r\n\r\n  return ok\r\n  ? children\r\n  : <LoadingToRedirect />// ถ้าไม่ใช่ user ให้ไปหน้าที่ LoadingToRedirect\r\n}\r\n\r\nexport default AdminRoute"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,SAASC,WAAT,QAA4B,aAA5B,C,CAAyC;;AACzC,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,SAASC,YAAT,QAA6B,mBAA7B;;;AAEA,MAAMC,UAAU,GAAG,QAAgB;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;EAEjC,MAAM;IAAEC;EAAF,IAAWL,WAAW,CAACM,KAAK,KAAK,EAAC,GAAGA;EAAJ,CAAL,CAAN,CAA5B,CAFiC,CAEmB;;EACpD,MAAM,CAACC,EAAD,EAAKC,KAAL,IAAcV,QAAQ,CAAC,KAAD,CAA5B,CAHiC,CAGG;;EAEpCC,SAAS,CAAC,MAAM;IACd,IAAGM,IAAI,IAAIA,IAAI,CAACI,KAAhB,EAAsB;MACpBP,YAAY,CAACG,IAAI,CAACI,KAAN,CAAZ,CACCC,IADD,CACMC,GAAG,IAAI;QACXC,OAAO,CAACC,GAAR,CAAaF,GAAb;QACEH,KAAK,CAAC,IAAD,CAAL;MAEH,CALD,EAMCM,KAND,CAMOC,GAAG,IAAI;QACZH,OAAO,CAACC,GAAR,CAAYE,GAAZ;QACAP,KAAK,CAAC,KAAD,CAAL;MACD,CATD;IAUD;EACF,CAbQ,EAaP,EAbO,CAAT;EAgBA,OAAOD,EAAE,GACPH,QADO,gBAEP,QAAC,iBAAD;IAAA;IAAA;IAAA;EAAA,QAFF,CArBiC,CAuBV;AACxB,CAxBD;;GAAMD,U;UAEaH,W;;;KAFbG,U;AA0BN,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}