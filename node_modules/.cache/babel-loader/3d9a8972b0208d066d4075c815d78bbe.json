{"ast":null,"code":"var _jsxFileName = \"E:\\\\Mern login\\\\client\\\\src\\\\components\\\\routes\\\\AdminRoute.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport LoadingToRedirect from './LoadingToRedirect';\nimport { currentAdmin } from '../functions/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminRoute = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [ok, setOk] = useState(false);\n  useEffect(() => {\n    if (user && user.token) {\n      currentAdmin(user.token) // เก็บค่าสถานะการเข้าถึง page จะเปลี่ยนเป็น true ถ้าไม่สิทธิ์เข้า page จะ redirect ไปหน้าแรก\n      .then(res => {\n        //res\n        console.log(res);\n        setOk(true);\n      }).catch(err => {\n        //err\n        console.log(err);\n        setOk(false);\n      });\n    }\n  }, [user]);\n  return ok ? children : /*#__PURE__*/_jsxDEV(LoadingToRedirect, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 7\n  }, this);\n};\n\n_s(AdminRoute, \"wBhjhzGBq1sJowQkY90HFv97Gs4=\", false, function () {\n  return [useSelector];\n});\n\n_c = AdminRoute;\nexport default AdminRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminRoute\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","LoadingToRedirect","currentAdmin","AdminRoute","children","user","state","ok","setOk","token","then","res","console","log","catch","err"],"sources":["E:/Mern login/client/src/components/routes/AdminRoute.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport LoadingToRedirect from './LoadingToRedirect'\r\nimport { currentAdmin } from '../functions/auth'\r\n\r\nconst AdminRoute = ({children}) => {\r\n    const { user } = useSelector((state)=> ({...state}))\r\n    const [ok, setOk] = useState(false)\r\n\r\n    useEffect(()=>{\r\n\r\n    if(user && user.token){\r\n        currentAdmin(user.token)// เก็บค่าสถานะการเข้าถึง page จะเปลี่ยนเป็น true ถ้าไม่สิทธิ์เข้า page จะ redirect ไปหน้าแรก\r\n\r\n        .then(res=>{\r\n            //res\r\n\r\n            console.log(res)\r\n            setOk(true)\r\n          \r\n        }).catch(err=>{\r\n            //err\r\n            console.log(err)\r\n            setOk(false)\r\n           \r\n        })\r\n    }   \r\n\r\n    },[user])\r\n\r\n\r\n    return ok\r\n    ? children\r\n    : <LoadingToRedirect />\r\n}\r\n\r\nexport default AdminRoute"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,SAASC,YAAT,QAA6B,mBAA7B;;;AAEA,MAAMC,UAAU,GAAG,QAAgB;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;EAC/B,MAAM;IAAEC;EAAF,IAAWL,WAAW,CAAEM,KAAD,KAAW,EAAC,GAAGA;EAAJ,CAAX,CAAD,CAA5B;EACA,MAAM,CAACC,EAAD,EAAKC,KAAL,IAAcV,QAAQ,CAAC,KAAD,CAA5B;EAEAC,SAAS,CAAC,MAAI;IAEd,IAAGM,IAAI,IAAIA,IAAI,CAACI,KAAhB,EAAsB;MAClBP,YAAY,CAACG,IAAI,CAACI,KAAN,CAAZ,CAAwB;MAAxB,CAECC,IAFD,CAEMC,GAAG,IAAE;QACP;QAEAC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACAH,KAAK,CAAC,IAAD,CAAL;MAEH,CARD,EAQGM,KARH,CAQSC,GAAG,IAAE;QACV;QACAH,OAAO,CAACC,GAAR,CAAYE,GAAZ;QACAP,KAAK,CAAC,KAAD,CAAL;MAEH,CAbD;IAcH;EAEA,CAnBQ,EAmBP,CAACH,IAAD,CAnBO,CAAT;EAsBA,OAAOE,EAAE,GACPH,QADO,gBAEP,QAAC,iBAAD;IAAA;IAAA;IAAA;EAAA,QAFF;AAGH,CA7BD;;GAAMD,U;UACeH,W;;;KADfG,U;AA+BN,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}