{"ast":null,"code":"var _jsxFileName = \"E:\\\\Mern login\\\\client\\\\src\\\\components\\\\pages\\\\Shop.js\",\n    _s = $RefreshSig$();\n\n// rafce\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ProductCart from \"../card/ProductCard\"; // antd\n\nimport { Slider, Checkbox } from \"antd\"; // function\n\nimport { listProduct, searchFilters } from \"../functions/product\";\nimport { listCategory } from \"../functions/category\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Shop = () => {\n  _s();\n\n  const [product, setProduct] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [price, setPrice] = useState([0, 0]);\n  const [ok, setOk] = useState(false); // Category\n\n  const [category, setCategory] = useState([]);\n  const [categorySelect, setCategorySelect] = useState([]);\n  const {\n    search\n  } = useSelector(state => ({ ...state\n  })); // console.log(search.text)\n\n  const {\n    text\n  } = search; // text\n  // 1. Load All Data\n\n  useEffect(() => {\n    //code\n    loadData();\n    listCategory().then(res => setCategory(res.data));\n  }, []);\n\n  const loadData = () => {\n    setLoading(true); // code\n\n    listProduct(12).then(res => {\n      setProduct(res.data);\n      setLoading(false);\n    }).catch(err => {\n      setLoading(false);\n      console.log(err);\n    });\n  }; // 2. load data Text\n\n\n  useEffect(() => {\n    const delay = setTimeout(() => {\n      fetchDataFilter({\n        query: text\n      });\n\n      if (!text) {\n        loadData();\n      }\n    }, 300);\n    return () => clearTimeout(delay);\n  }, [text]); // Filter\n\n  const fetchDataFilter = arg => {\n    searchFilters(arg).then(res => {\n      setProduct(res.data);\n    });\n  }; // 3. Load on Slider\n\n\n  useEffect(() => {\n    fetchDataFilter({\n      price\n    }); // [0,0]\n  }, [ok]);\n\n  const handlePrice = value => {\n    setPrice(value);\n    setTimeout(() => {\n      setOk(!ok);\n    }, 300);\n  };\n\n  const handleCheck = e => {\n    // ค่าปัจจุบันที่ Check\n    let inCheck = e.target.value; // ค่าเดิมของ Check\n\n    let inState = [...categorySelect];\n    let findCheck = inState.indexOf(inCheck);\n\n    if (findCheck === -1) {\n      inState.push(inCheck);\n    } else {\n      inState.splice(findCheck, 1);\n    }\n\n    setCategorySelect(inState);\n    fetchDataFilter({\n      category: inState\n    }); // [0,0]\n\n    if (inState.length < 1) {\n      loadData();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-3 \",\n          style: {\n            backgroundColor: '#F1F0F0',\n            height: '10vh',\n            borderRadius: '10px',\n            marginTop: '10px',\n            marginLeft: '10px',\n            marginRight: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mt-3 \",\n            children: \" Filter / Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E23\\u0E32\\u0E04\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Slider, {\n            value: price,\n            onChange: handlePrice,\n            range: true,\n            max: 5000\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E15\\u0E32\\u0E21\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), category.map((item, index) => /*#__PURE__*/_jsxDEV(Checkbox, {\n            onChange: handleCheck,\n            value: item._id,\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-9\",\n          children: [loading ? /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-danger\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"badge  \",\n            style: {\n              backgroundColor: '#3B82F6',\n              color: 'white',\n              fontSize: '50px',\n              padding: '10px',\n              borderRadius: '10px',\n              margin: '10px',\n              textAlign: 'center',\n              display: 'block'\n            },\n            children: \"Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this), product.length < 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No Product found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 36\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row pb-5\",\n            children: product.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4 mt-3\",\n              children: /*#__PURE__*/_jsxDEV(ProductCart, {\n                product: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Shop, \"uea/pGYMmPhAeqs7y8W9Yu6I5Eg=\", false, function () {\n  return [useSelector];\n});\n\n_c = Shop;\nexport default Shop;\n\nvar _c;\n\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","ProductCart","Slider","Checkbox","listProduct","searchFilters","listCategory","Shop","product","setProduct","loading","setLoading","price","setPrice","ok","setOk","category","setCategory","categorySelect","setCategorySelect","search","state","text","loadData","then","res","data","catch","err","console","log","delay","setTimeout","fetchDataFilter","query","clearTimeout","arg","handlePrice","value","handleCheck","e","inCheck","target","inState","findCheck","indexOf","push","splice","length","backgroundColor","height","borderRadius","marginTop","marginLeft","marginRight","map","item","index","_id","name","color","fontSize","padding","margin","textAlign","display"],"sources":["E:/Mern login/client/src/components/pages/Shop.js"],"sourcesContent":["// rafce\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport ProductCart from \"../card/ProductCard\";\r\n\r\n// antd\r\nimport { Slider, Checkbox } from \"antd\";\r\n\r\n// function\r\nimport { listProduct, searchFilters } from \"../functions/product\";\r\nimport { listCategory } from \"../functions/category\";\r\n\r\nconst Shop = () => {\r\n  const [product, setProduct] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [price, setPrice] = useState([0, 0]);\r\n  const [ok, setOk] = useState(false);\r\n\r\n  // Category\r\n  const [category, setCategory] = useState([]);\r\n  const [categorySelect, setCategorySelect] = useState([]);\r\n\r\n  const { search } = useSelector((state) => ({ ...state }));\r\n  // console.log(search.text)\r\n  const { text } = search;\r\n  // text\r\n\r\n  // 1. Load All Data\r\n  useEffect(() => {\r\n    //code\r\n    loadData();\r\n    listCategory().then((res) => setCategory(res.data));\r\n  }, []);\r\n\r\n  const loadData = () => {\r\n    setLoading(true);\r\n    // code\r\n    listProduct(12)\r\n      .then((res) => {\r\n        setProduct(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  // 2. load data Text\r\n  useEffect(() => {\r\n    const delay = setTimeout(() => {\r\n      fetchDataFilter({ query: text });\r\n      if (!text) {\r\n        loadData();\r\n      }\r\n    }, 300);\r\n    return () => clearTimeout(delay);\r\n  }, [text]);\r\n\r\n  // Filter\r\n  const fetchDataFilter = (arg) => {\r\n    searchFilters(arg).then((res) => {\r\n      setProduct(res.data);\r\n    });\r\n  };\r\n\r\n  // 3. Load on Slider\r\n  useEffect(() => {\r\n    fetchDataFilter({ price }); // [0,0]\r\n  }, [ok]);\r\n\r\n  const handlePrice = (value) => {\r\n    setPrice(value);\r\n\r\n    setTimeout(() => {\r\n      setOk(!ok);\r\n    }, 300);\r\n  };\r\n  const handleCheck = (e) => {\r\n    // ค่าปัจจุบันที่ Check\r\n    let inCheck = e.target.value;\r\n\r\n    // ค่าเดิมของ Check\r\n    let inState = [...categorySelect];\r\n\r\n    let findCheck = inState.indexOf(inCheck);\r\n\r\n    if (findCheck === -1) {\r\n      inState.push(inCheck);\r\n    } else {\r\n      inState.splice(findCheck, 1);\r\n    }\r\n    setCategorySelect(inState);\r\n    fetchDataFilter({ category: inState }); // [0,0]\r\n    if(inState.length <1){\r\n      loadData()\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container-fluid \" >\r\n        <div className=\"row\">\r\n          <div className=\"col-md-3 \" style={{backgroundColor : '#F1F0F0' , height: '10vh' , borderRadius : '10px' , marginTop : '10px' , marginLeft : '10px' , marginRight : '10px'}}>\r\n          <h4 className=\"mt-3 \" > Filter / Search</h4>\r\n            <hr />\r\n            <h6 >ค้นหาด้วยราคาสินค้า</h6>\r\n            <Slider value={price} onChange={handlePrice} range max={5000} />\r\n            <hr />\r\n            <h6>ค้นหาตามหมวดหมู่สินค้า</h6>\r\n            {category.map((item, index) => (\r\n              <Checkbox onChange={handleCheck} value={item._id}>\r\n                {item.name}\r\n              </Checkbox>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"col-md-9\">\r\n            {loading ? (\r\n              <h4 className=\"text-danger\">Loading...</h4>\r\n            ) : (\r\n              <span class=\"badge  \" style={ {backgroundColor: '#3B82F6', color: 'white', fontSize: '50px', padding: '10px', borderRadius: '10px', margin: '10px', textAlign: 'center', display: 'block'} }>Product</span>\r\n            )}\r\n\r\n            {product.length < 1 && <p>No Product found</p>}\r\n\r\n            <div className=\"row pb-5\">\r\n              {product.map((item, index) => (\r\n                <div key={index} className=\"col-md-4 mt-3\">\r\n                  <ProductCart product={item} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}