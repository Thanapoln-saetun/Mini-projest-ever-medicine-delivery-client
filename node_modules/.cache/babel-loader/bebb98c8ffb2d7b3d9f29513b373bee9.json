{"ast":null,"code":"import _slicedToArray from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"E:/Mern login/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import LoadingToRedirect from'./LoadingToRedirect';import{currentAdmin}from'../functions/auth';import{jsx as _jsx}from\"react/jsx-runtime\";var AdminRoute=function AdminRoute(_ref){var children=_ref.children;var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ok=_useState2[0],setOk=_useState2[1];useEffect(function(){if(user&&user.token){currentAdmin(user.token)//เช็คว่าเป็น admin ไหม\n.then(function(res){//res\nconsole.log(res);setOk(true);//ถ้าเป็น admin ไปต่อได้\n}).catch(function(err){//err\nconsole.log(err);setOk(false);});}},[user]);return ok?children:/*#__PURE__*/_jsx(LoadingToRedirect,{});};export default AdminRoute;","map":{"version":3,"names":["React","useState","useEffect","useSelector","LoadingToRedirect","currentAdmin","AdminRoute","children","state","user","ok","setOk","token","then","res","console","log","catch","err"],"sources":["E:/Mern login/client/src/components/routes/AdminRoute.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport LoadingToRedirect from './LoadingToRedirect'\r\nimport { currentAdmin } from '../functions/auth'\r\n\r\nconst AdminRoute = ({children}) => {\r\n    const { user } = useSelector((state)=> ({...state}))\r\n    const [ok, setOk] = useState(false)\r\n\r\n    useEffect(()=>{\r\n\r\n    if(user && user.token){\r\n        currentAdmin(user.token)//เช็คว่าเป็น admin ไหม\r\n        .then(res=>{\r\n            //res\r\n            console.log(res)\r\n            setOk(true)//ถ้าเป็น admin ไปต่อได้\r\n        }).catch(err=>{\r\n            //err\r\n            console.log(err)\r\n            setOk(false)\r\n        })\r\n    }   \r\n\r\n    },[user])\r\n\r\n\r\n    return ok\r\n    ? children\r\n    : <LoadingToRedirect />\r\n}\r\n\r\nexport default AdminRoute\r\n"],"mappings":"mNAAA,MAAOA,MAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,kBAAP,KAA8B,qBAA9B,CACA,OAASC,YAAT,KAA6B,mBAA7B,C,2CAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,MAAgB,IAAdC,SAAc,MAAdA,QAAc,CAC/B,iBAAiBJ,WAAW,CAAC,SAACK,KAAD,0BAAeA,KAAf,GAAD,CAA5B,CAAQC,IAAR,cAAQA,IAAR,CACA,cAAoBR,QAAQ,CAAC,KAAD,CAA5B,wCAAOS,EAAP,eAAWC,KAAX,eAEAT,SAAS,CAAC,UAAI,CAEd,GAAGO,IAAI,EAAIA,IAAI,CAACG,KAAhB,CAAsB,CAClBP,YAAY,CAACI,IAAI,CAACG,KAAN,CAAY;AAAxB,CACCC,IADD,CACM,SAAAC,GAAG,CAAE,CACP;AACAC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAH,KAAK,CAAC,IAAD,CAAL,CAAW;AACd,CALD,EAKGM,KALH,CAKS,SAAAC,GAAG,CAAE,CACV;AACAH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACAP,KAAK,CAAC,KAAD,CAAL,CACH,CATD,EAUH,CAEA,CAfQ,CAeP,CAACF,IAAD,CAfO,CAAT,CAkBA,MAAOC,GAAE,CACPH,QADO,cAEP,KAAC,iBAAD,IAFF,CAGH,CAzBD,CA2BA,cAAeD,WAAf"},"metadata":{},"sourceType":"module"}